# Database Documentation for `{{database/name}}`

This is an autogenerated documentation for database `{{database/name}}`.
The database has **{{len database/tables}}** tables, **{{colcount database}}** columns, **{{len database/constraints}}** constraints
and a total of **{{idxcount database}}** indexes, excluding primary keys.

During the documentation process the user selected table `{{table_name}}` as subject, so we include a
detailed [section](#detailed-section-for-{{inflect table/name to_kebab_case=true}}) dedicated to that table.

## Tables

In this section we will list each table and provide details about its primary key and other columns.

{{#each database/tables}}
### {{inflect this/name to_title_case=true}}
Table `{{@key}}` has {{len this/columns}} columns and a primary key `{{concat this/primary_key separator=", "}}`.

### Columns:

| Column | SQL Type | JSON Type | Rust Type |
| :--- | :---: | :---: | :---: |
{{#each this/columns}}
| `{{this/name}}` | `{{datatype_sql this/datatype}}` | `{{datatype_json this.datatype_json}}` | `{{{this.datatype_rust.[0]}}}` |
{{/each}}

{{/each}}

## Detailed section for {{inflect table/name to_title_case=true}}

Table `{{table/name}}` has {{len table/columns}} columns and a primary key `{{concat table/primary_key separator=", "}}`.

### Columns:

| Column | SQL Type | JSON Type | Rust Type |
| :--- | :---: | :---: | :---: |
{{#each table/columns}}
| `{{this/name}}` | `{{datatype_sql this/datatype}}` | `{{datatype_json this.datatype_json}}` | `{{{this.datatype_rust.[0]}}}` |
{{/each}}

### Foreign keys

#### Local

{{#if (gt (len constraints_local) 0)}}
| Name | Local Column | Foreign Column |
| :--- | :--- | :--- |
{{#each constraints_local}}
| `{{name}}` | `{{key_pairs.[0].local.table}}`.`{{key_pairs.[0].local.name}}` | `{{key_pairs.[0].foreign.table}}`.`{{key_pairs.[0].foreign.name}}` |
{{/each}}
{{/if}}

#### Foreign

{{#if (gt (len constraints_foreign) 0)}}
| Name | Local Column | Foreign Column |
| :--- | :--- | :--- |
{{#each constraints_foreign}}
| `{{name}}` | `{{key_pairs.[0].local.table}}`.`{{key_pairs.[0].local.name}}` | `{{key_pairs.[0].foreign.table}}`.`{{key_pairs.[0].foreign.name}}` |
{{/each}}
{{/if}}

### Indexes

{{#if (gt (len table/indexes) 0)}}
| Name | Local Column | Primary | Unique |
| :--- | :--- | :---: | :---: |
{{#each table/indexes}}
| `{{name}}` | `{{column/name}}` | {{#if primary}}YES{{else}}NO{{/if}} | {{#if unique}}YES{{else}}NO{{/if}} |
{{/each}}
{{/if}}


## Constraints

{{#if (gt (len database/constraints) 0)}}
| Name | Local Column | Foreign Column |
| :--- | :--- | :--- |
{{#each database/constraints}}
| `{{name}}` | `{{key_pairs.[0].local.table}}`.`{{key_pairs.[0].local.name}}` | `{{key_pairs.[0].foreign.table}}`.`{{key_pairs.[0].foreign.name}}` |
{{/each}}
{{/if}}